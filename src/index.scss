@import url("https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=Teko:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&display=swap");

:root {
  /* Polices principales - style technique/futuriste comme dans le poster */
  --font-body: "Rajdhani", sans-serif;
  --font-heading: "Teko", sans-serif;
  --font-tech: "Orbitron", sans-serif;

  --font-weight-body: 400;
  --font-weight-medium: 500;
  --font-weight-bold: 700;
  --font-weight-heading: 600;

  --color-black: black;
  --color-black-alpha: rgba(0, 0, 0, 0.7);
  --color-white: white;
  --color-grey: #767474;
  --color-grey-dark: #3e3e3e;
  --color-Avatar: #fcc088;
  --color-Avatar-light: #fcc088;
  --color-red: #d42027; /* Rouge du poster */
}

.OumaPortfolio-helper {
  display: none;
}

html,
body,
.app {
  overflow: hidden;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: var(--font-body);
  font-weight: var(--font-weight-body);
}

body {
  font-size: clamp(18px, 3.5vmin, 26px);
  line-height: 110%;

  // Responsive font sizes
  @media (max-width: 768px) {
    font-size: clamp(16px, 4vw, 20px);
  }

  @media (max-width: 480px) {
    font-size: clamp(14px, 4vw, 18px);
  }
}
.canvas {
  background: transparent !important;
}
.app {
  background-color: var(--color-black);
  min-height: 100vh;
  width: 100%;
  color: #f9f9f9;

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  h8 {
    font-family: var(--font-body);
    font-weight: 300;
    margin: 5px;
  }

h1 {
   font-size: clamp(18px, 5vmin, 70px);


    @media (max-width: 1024px) {
      font-size: clamp(28px, 8vmin, 80px);
    }

    @media (max-width: 768px) {
      font-size: clamp(24px, 7vmin, 60px);
    }

    @media (max-width: 480px) {
      font-size: clamp(20px, 6vmin, 45px);
    }
  }

  h2 {
    font-size: clamp(30px, 11vmin, 100px);

    @media (max-width: 1024px) {
      font-size: clamp(26px, 8vmin, 70px);
    }

    @media (max-width: 768px) {
      font-size: clamp(22px, 6vmin, 50px);
    }

    @media (max-width: 480px) {
      font-size: clamp(18px, 5vmin, 35px);
    }
  }

  h3 {
    font-size: clamp(24px, 6.5vmin, 60px);

    @media (max-width: 1024px) {
      font-size: clamp(22px, 5.5vmin, 45px);
    }

    @media (max-width: 768px) {
      font-size: clamp(20px, 5vmin, 35px);
    }

    @media (max-width: 480px) {
      font-size: clamp(16px, 4vmin, 28px);
    }
  }

  h4 {
    font-size: clamp(20px, 4vmin, 40px);

    @media (max-width: 1024px) {
      font-size: clamp(18px, 3.5vmin, 30px);
    }

    @media (max-width: 768px) {
      font-size: clamp(16px, 3vmin, 24px);
    }

    @media (max-width: 480px) {
      font-size: clamp(14px, 2.5vmin, 20px);
    }
  }

  h8 {
      font-size: clamp(10px, 2vmin, 17px);

    @media (max-width: 1024px) {
      font-size: clamp(16px, 3vmin, 24px);
    }

    @media (max-width: 768px) {
      font-size: clamp(10px, 2vmin, 17px);
    }

    @media (max-width: 480px) {
      font-size:0px;
    }
  }

  a,
  a:visited {
    color: var(--color-Avatar-light);
    pointer-events: all;

    &:hover {
      color: var(--color-Avatar);
    }
  }
}

.top-bar {
  position: absolute;
  top: 1em;
  left: 1em;
  right: 1em;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 80%;
  pointer-events: none;

  @media (max-width: 768px) {
    top: 0.5em;
    left: 0.5em;
    right: 0.5em;
    font-size: 70%;
  }

  @media (max-width: 480px) {
    font-size: 60%;
  }

  .left,
  .right {
    display: flex;
    align-items: center;
    gap: 0.5em;

    @media (max-width: 480px) {
      gap: 0.3em;
    }
  }

  .left {
    gap: 1em;

    @media (max-width: 768px) {
      gap: 0.7em;
    }

    @media (max-width: 480px) {
      gap: 0.5em;
    }
  }

  .left > * {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5em;
    display: none;
  }

  button {
    --size: 40px;
    --border-color: var(--color-grey);

    display: none;
    width: var(--size);
    height: var(--size);
    background-color: var(--color-black-alpha);
    border: solid 2px var(--border-color);
    border-radius: 40px;
    cursor: pointer;
    position: relative;

    align-items: center;
    justify-content: center;

    pointer-events: all;

    @media (max-width: 768px) {
      --size: 35px;
      border-width: 1.5px;
    }

    @media (max-width: 480px) {
      --size: 30px;
      border-width: 1px;
    }

    svg {
      transition: transform 0.2s ease-in-out;

      @media (max-width: 480px) {
        transform: scale(0.8);
      }
    }

    &.show-unless {
      display: flex;
    }

    &[data-off] {
      svg {
        transform: scale(0.8);

        @media (max-width: 480px) {
          transform: scale(0.6);
        }
      }

      &::after {
        content: "";
        width: 100%;
        height: 2px;
        position: absolute;
        top: 50%;
        left: 50%;
        background-color: var(--border-color);
        transform: translate(-50%, -50%) rotate(-45deg);

        @media (max-width: 480px) {
          height: 1.5px;
        }
      }
    }

    &:hover,
    &:active {
      --border-color: var(--color-Avatar);
    }
  }
}

.count {
  font-variant-numeric: tabular-nums;
}

.health-bar {
  width: 260px;
  height: 20px;
  border: 2px solid var(--color-grey);
  background-color: var(--color-black-alpha);

  overflow: hidden;
  position: relative;

  @media (max-width: 768px) {
    width: 200px;
    height: 16px;
  }

  @media (max-width: 480px) {
    width: 150px;
    height: 12px;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 5px;
    background-color: var(--color-Avatar);
    transform-origin: left center;
    transform: scaleX(
      calc(8000000000000000000000000000000000000 * var(--health))
    );

    @media (max-width: 480px) {
      inset: 3px;
    }
  }
}

//heyyyy
.canvas,
.overlay,
.screens {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  max-height: 100vw;
  max-width: 2000px;
  transform: translate(-50%, -50%);
  background: transparent !important;
}

.screens {
  pointer-events: none;
  max-width: 1280px;
  margin: 0 auto;

  @media (max-width: 1024px) {
    max-width: 100%;
  }

  > * {
    --pad: 5vmin;

    position: absolute;
    inset: var(--pad);

    display: grid;
    align-items: stretch;
    justify-items: stretch;
    justify-content: center;
    display: none;

    @media (max-width: 768px) {
      --pad: 3vmin;
    }

    @media (max-width: 480px) {
      --pad: 2vmin;
    }

    &::after {
      grid-area: space;
    }
  }

  // MASQUER LES PORTFOLIOS SUR LES APPAREILS MOYENS ET PETITS
  //   .OumaPortfolios {
  //     inset: unset;
  //     bottom: 3vmin;
  //     right: 3vmin;
  //     z-index: 10;
  //     max-width: 50%;

  //     display: none;

  //     grid-template-columns: 1fr 1fr 1fr;
  //     grid-template-rows: 1fr;

  //     gap: 1.5rem;
  //     justify-content: center;
  //     align-items: center;
  //     padding: 0.5rem 1.5rem;

  //     // MASQUER COMPLÈTEMENT SUR TABLETTES ET MOBILES
  //     // @media (max-width: 1024px) {
  //     //   display: none !important;
  //     //   visibility: hidden;
  //     // }

  //     // Styles uniquement pour les grands écrans (desktop)
  //     @media (min-width: 1025px) {
  //       .OumaPortfolio-path {
  //         width: 70px;
  //         position: relative;

  //         .check {
  //           display: none;
  //         }

  //         svg {
  //           width: 60%;
  //           fill: none;
  //         }
  //       }

  //       .info {
  //         display: none;
  //         flex-direction: column;

  //         h4 {
  //           margin-bottom: 0.2rem;
  //         }

  //         p {
  //           font-size: 15px;
  //           line-height: 1.2;
  //         }
  //       }

  //       .charge-path {
  //         stroke-width: 6;
  //         stroke-dasharray: var(--length) var(--length);
  //         stroke-dashoffset: calc(((1 - var(--charge))) * var(--length));
  //       }

  //       .guide-path {
  //         stroke: rgba(255, 255, 255, 0.2);
  //       }

  //       .OumaPortfolio-details {
  //         display: flex;
  //         flex-direction: row;
  //         gap: 0.8rem;
  //         align-items: center;
  //         z-index: 2;
  //       }

  //       .background {
  //         position: absolute;
  //         inset: 0;
  //         border: solid 2px var(--color-grey);
  //         background-color: var(--color-black-alpha);
  //       }
  //   a {
  //  font-size: 16px;
  //   }
  //       &.corner {
  //         cursor: pointer;
  //         pointer-events: all;
  //         display: grid;

  //         .OumaPortfolio-path {
  //           &.ready {
  //             .check {
  //               opacity: 1;
  //               transform: translate(-50%, -200%);
  //             }
  //           }
  //         }

  //         &:hover {
  //           .background {
  //             border-color: var(--color-Avatar);
  //           }
  //         }
  //       }

  //       &.full {
  //         display: grid;
  //         grid-template-columns: 1fr;
  //         grid-template-rows: 1fr 1fr 1fr;
  //         bottom: 50%;
  //         gap: 2rem;
  //         transform: translateY(50%);
  //         padding: 2rem 3rem;

  //         .OumaPortfolio-path {
  //           width: 160px;

  //           .check {
  //             transition: none;
  //           }

  //           svg {
  //             --charge: 1 !important;
  //           }
  //         }

  //         .info {
  //           display: flex;
  //         }
  //       }
  //     }
  //   }
  body {
    background:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 50px,
        rgba(51, 17, 0, 0.1) 50px,
        rgba(51, 17, 0, 0.1) 51px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 50px,
        rgba(51, 17, 0, 0.1) 50px,
        rgba(51, 17, 0, 0.1) 51px
      ),
      radial-gradient(
        ellipse 150% 80% at 50% 100%,
        #4d1f00 0%,
        #261000 40%,
        #000000 80%
      );
  }
  .content {
    text-align: center;
    grid-area: content;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;

    > *:not(:last-child) {
      margin-bottom: clamp(20px, 5vmin, 50px);

      @media (max-width: 768px) {
        margin-bottom: clamp(15px, 4vmin, 35px);
      }

      @media (max-width: 480px) {
        margin-bottom: clamp(10px, 3vmin, 25px);
      }
    }
  }
  .content1 {
    text-align: justify;
    grid-area: content1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    line-height: 1.3;

    .contenthh {
      text-align: left;
      grid-area: content;
      display: flex;
      align-items: left;
      justify-content: center;
      flex-direction: column;
      line-height: 1.3;
    }

    @media (max-width: 768px) {
      text-align: left;
      line-height: 1.4;
    }

    @media (max-width: 480px) {
      text-align: left;
      line-height: 1.5;
    }

    > *:not(:last-child) {
      margin-bottom: clamp(20px, 5vmin, 50px);

      @media (max-width: 768px) {
        margin-bottom: clamp(15px, 4vmin, 35px);
      }

      @media (max-width: 480px) {
        margin-bottom: clamp(10px, 3vmin, 25px);
      }
    }
  }

  .button-row {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: row;
    gap: 0.7em;

    @media (max-width: 768px) {
      flex-direction: column;
      gap: 0.5em;
      align-items: center;
    }

    @media (max-width: 480px) {
      gap: 0.4em;
    }
  }

  button {
    --border-color: var(--color-grey);

    color: var(--color-white);
    pointer-events: all;
    cursor: pointer;
    font-family: var(--font-body);
    font-weight: var(--font-weight-body);

    &:not(.simple, .no-style) {
      background-color: var(--color-black-alpha);
      border: 2px solid var(--border-color);
      font-size: 30px;
      padding: 0.2em 1.4em;

      @media (max-width: 1024px) {
        font-size: 26px;
        padding: 0.3em 1.2em;
      }

      @media (max-width: 768px) {
        font-size: 22px;
        padding: 0.4em 1em;
      }

      @media (max-width: 480px) {
        font-size: 18px;
        padding: 0.5em 0.8em;
        border-width: 1.5px;
      }
    }

    &.simple {
      background-color: transparent;
      border: none;
      text-decoration: underline;
      text-decoration-color: var(--border-color);
      text-decoration-thickness: 2px;
      text-underline-offset: 5px;
      font-size: 20px;

      @media (max-width: 768px) {
        font-size: 18px;
        text-decoration-thickness: 1.5px;
        text-underline-offset: 4px;
      }

      @media (max-width: 480px) {
        font-size: 16px;
        text-decoration-thickness: 1px;
        text-underline-offset: 3px;
      }
    }

    &.simple1 {
      background-color: transparent;
      border: none;
      font-size: 18px;
      color: var(--color-grey);

      @media (max-width: 768px) {
        font-size: 16px;
      }

      @media (max-width: 480px) {
        font-size: 14px;
      }
    }

    &.no-style {
    }

    &:hover,
    &:active {
      --border-color: var(--color-Avatar);
    }
  }

  p {
    max-width: 400px;
    margin: 0;

    @media (max-width: 768px) {
      max-width: 90%;
    }

    @media (max-width: 480px) {
      max-width: 95%;
    }
  }
}

.loading-bar {
  width: 260px;
  height: 2px;

  background-color: var(--color-grey-dark);

  overflow: hidden;
  position: relative;

  @media (max-width: 768px) {
    width: 200px;
  }

  @media (max-width: 480px) {
    width: 150px;
  }

  &::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background-color: var(--color-Avatar);
    transform-origin: left center;
    transform: scaleX(calc(1 * var(--loaded)));
  }
}

// États responsive
[data-state="IDLE"],
[data-state="INIT"] {
  #sounds-button {
    display: none;
  }
}

[data-state="INIT"] {
  #sounds-button {
    display: none;
  }
}

[data-state="LOADING"] {
  [data-screen="LOADING"] {
    display: grid;
    grid-template-columns: 0px 1fr;
    grid-template-areas: "space content";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }
  }

  #sounds-button {
    display: none;
  }
}

[data-state="LOAD_ERROR"] {
  #sounds-button {
    display: none;
  }
}

[data-state="TITLE_SCREEN"] {
  [data-screen="TITLE_SCREEN"] {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-areas: "space content";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }

    h1 {
      line-height: 1.2em;

      @media (max-width: 480px) {
        line-height: 1.1em;
      }
    }
  }
}

[data-state="CREDITS"] {
  [data-screen="CREDITS"] {
    display: grid;
    grid-template-columns: 2fr 1fr;
    grid-template-areas: "content space";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }

    h3,
    .content {
      width: auto;
      text-align: left;

      @media (max-width: 480px) {
        text-align: left;
      }
    }

    ul {
      @media (max-width: 480px) {
        list-style: none;
        padding: 0;
        margin-top: 2rem;
        text-align: left;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 2rem !important;
      }
    }

    li {
      @media (max-width: 480px) {
        margin: 0;
        font-size: 0.9em;
        line-height: 1.4; /* Hauteur de ligne uniforme */
      }
    }

    // Normalise les liens pour avoir la même hauteur
    a {
      @media (max-width: 480px) {
        display: inline; // Reste en ligne
        line-height: 1.4; // Même hauteur que le li
        vertical-align: baseline; // Alignement cohérent
        padding: 0;
        margin: 0;
      }
    }
  }
}
[data-state="INSTRUCTIONS_OumaPortfolioS"]
  [data-screen="INSTRUCTIONS_OumaPortfolioS"]
  .content {
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center; /* centre horizontalement */
  margin: 0 auto; /* pour bien centrer */
  max-width: 90%; /* évite que ça déborde sur petits écrans */
}

// [data-state="INSTRUCTIONS_Avatar"] {
//   [data-screen="INSTRUCTIONS_Avatar"] {
//     display: grid;
//     grid-template-rows: 1fr 1.2fr;
//     grid-template-areas: "space" "content";

//     @media (max-width: 768px) {
//       grid-template-rows: 0.5fr 1fr;
//     }

//     @media (max-width: 480px) {
//       grid-template-rows: 1fr;
//       grid-template-areas: "content";
//     }
//   }
// }

// [data-state="INSTRUCTIONS_service"] {
//   [data-screen="INSTRUCTIONS_service"] {
//     display: grid;
//     grid-template-columns: 1.5fr 2fr;
//     grid-template-areas: "content space";

//     @media (max-width: 768px) {
//       grid-template-columns: 1fr;
//       grid-template-areas: "content";
//     }

//     .content1 {
//       justify-content: flex-start;

//       @media (max-width: 768px) {
//         justify-content: center;
//       }
//     }

//     .content {
//       justify-content: flex-end;

//       @media (max-width: 768px) {
//         justify-content: center;
//       }
//     }
//   }
// }

[data-state="INSTRUCTIONS_CAST"] {
  [data-screen="INSTRUCTIONS_CAST"] {
    display: grid;
    grid-template-columns: 0px 1fr;
    grid-template-areas: "space content";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }
  }
}

#OumaPortfolio-guide {
  width: 70%;
  max-width: 400px;
  opacity: 0;
  transition: opacity 1s ease-in-out;

  @media (max-width: 768px) {
    width: 80%;
    max-width: 300px;
  }

  @media (max-width: 480px) {
    width: 90%;
    max-width: 250px;
  }

  &.show {
    opacity: 0.5;
  }
}

// Section Instructions - Responsive Grid avec Flèche Guide
[data-state="INSTRUCTIONS_OumaPortfolioS"] {
  [data-screen="INSTRUCTIONS_OumaPortfolioS"] {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    grid-template-areas: "content space";
    position: relative;
    min-height: 100vh;
    align-items: center;

    .content {
      grid-area: content;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;

      p {
        font-size: clamp(1rem, 2.5vw, 1.25rem);
        line-height: 1.6;
        margin-bottom: 2rem;
      }

      button {
        padding: 0.75rem 2rem;
        font-size: clamp(0.9rem, 2vw, 1.1rem);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        max-width: fit-content;
      }
    }

    // Flèche guide spécifique à cette section
    .pause-guide-arrow {
      position: absolute;
      top: 20px;
      right: 80px;
      z-index: 1000;
      pointer-events: none;
      opacity: 0.8;
      animation: pulseArrow 2s infinite ease-in-out;

      // SVG flèche réaliste pointant vers le bas-gauche
      svg {
        width: 32px;
        height: 32px;
        fill: currentColor;
        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        transform: rotate(-135deg); // Pointe vers le bouton pause
      }
    }

    // Responsive breakpoints - Tablettes
    @media (max-width: 1024px) {
      grid-template-columns: 1fr 1fr;

      .content {
        // Garde la même disposition, pas de centrage
        padding: 1.5rem;
      }

      .pause-guide-arrow {
        top: 15px;
        right: 60px;

        svg {
          width: 28px;
          height: 28px;
        }
      }
    }

    // Tablettes en portrait et petits laptops
    @media (max-width: 820) {
      grid-template-columns: 1fr 1.2fr;
      // Garde encore la grill
      position: absolute !important;
      top: -20% !important;

      .content {
        padding: 1.5rem;
        // PAS de text-align: center

        button {
          // PAS de width: 100% ni centrage
          min-height: 44px;
        }
      }
      .pause-guide-arrow {
        top: 10px;
        right: 50px;

        svg {
          width: 24px;
          height: 24px;
        }
      }
    }

    // Seulement sur très petits écrans
    @media (max-width: 480px) {
      grid-template-columns: 0fr 2fr; // Garde la grille
      position: absolute !important;
      top: -50% !important;

      .content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.2rem;
        text-align: center;

        // Masquer le texte du paragraphe
        p {
          display: none !important;
        }

        // Centrer le bouton
        button {
          margin: 0 auto;

          align-self: flex-start !important;
        }
      }

      .pause-guide-arrow {
        top: 8px;
        right: 40px;

        svg {
          width: 20px;
          height: 20px;
        }
      }
    }
  }
}

// Animation pour la flèche guide
@keyframes pulseArrow {
  0% {
    opacity: 0.6;
    transform: rotate(-135deg) scale(1);
  }
  50% {
    opacity: 1;
    transform: rotate(-135deg) scale(1.1);
  }
  100% {
    opacity: 0.6;
    transform: rotate(-135deg) scale(1);
  }
}

// Media queries pour orientation paysage sur mobile
@media (orientation: landscape) and (max-height: 600px) {
  [data-state="INSTRUCTIONS_OumaPortfolioS"] {
    [data-screen="INSTRUCTIONS_OumaPortfolioS"] {
      grid-template-rows: 1fr;

      .content {
        padding: 1rem;

        p {
          margin-bottom: 1rem;
          font-size: 1rem;
        }
      }

      .pause-guide-arrow {
        top: 5px;
        right: 35px;

        svg {
          width: 18px;
          height: 18px;
        }
      }
    }
  }
}

// High DPI displays
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  [data-state="INSTRUCTIONS_OumaPortfolioS"] {
    .pause-guide-arrow svg {
      filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.4));
    }
  }
}

[data-state="Application_RUNNING"],
[data-state="SPECIAL_OumaPortfolio"] {
  #health-bar {
    display: flex;
  }

  #service-state {
    display: flex;
  }

  #pause-button {
    display: flex;
  }
}

[data-state="ENDLESS_MODE"],
[data-state="ENDLESS_SPECIAL_OumaPortfolio"] {
  #endless-mode {
    display: flex;
  }

  #close-button {
    display: flex;
  }

  #pause-button {
    display: flex;
  }
}

[data-state="ENDLESS_OumaPortfolio_OVERLAY"] {
  #endless-mode {
    display: flex;
  }
}

[data-state="PAUSED"],
[data-state="ENDLESS_PAUSE"] {
  [data-screen="PAUSED"] {
    display: grid;
    grid-template-rows: 2fr 1fr;
    grid-template-areas: "space" "content";

    @media (max-width: 768px) {
      grid-template-rows: 1fr 1fr;
    }

    @media (max-width: 480px) {
      grid-template-rows: 1fr;
      grid-template-areas: "content";
    }

    .content {
      justify-content: flex-end;

      @media (max-width: 768px) {
        justify-content: center;
      }
    }
  }

  #paused {
    display: flex;
  }

  #pause-button {
    display: flex;
  }
}

[data-state="ENDLESS_PAUSE"],
[data-state="CREDITS"] {
  #close-button {
    display: flex;
  }
}

[data-state="OumaPortfolio_OVERLAY"],
[data-state="ENDLESS_OumaPortfolio_OVERLAY"] {
  [data-screen="OumaPortfolio_OVERLAY"] {
    display: grid;
    grid-template-columns: 1fr 2fr;
    grid-template-areas: "content space";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }

    // Seulement sur très petits écrans
    @media (max-width: 480px) {
      grid-template-columns: 0fr 2fr; // Garde la grille
      position: absolute !important;
      top: 0% !important;

      .content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.2rem;
        text-align: center;

        // Centrer le bouton
        button {
          margin: 0 auto;

          align-self: flex-start !important;
        }
      }
    }
  }
}

[data-state="OumaPortfolio_OVERLAY"] {
  #health-bar {
    display: flex;
  }

  #service-state {
    display: flex;
  }
}

[data-state="Application_OVER"] {
  [data-screen="Application_OVER"] {
    display: grid;
    grid-template-columns: 0px 1fr;
    grid-template-areas: "space content";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }

    .content {
      justify-content: flex-end;

      @media (max-width: 768px) {
        justify-content: center;
      }
    }
  }
}

[data-state="utilisateur"] {
  [data-screen="utilisateur"] {
    display: grid;
    grid-template-columns: 0px 1fr;
    grid-template-areas: "space content";

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      grid-template-areas: "content";
    }

    .content {
      justify-content: flex-end;

      @media (max-width: 768px) {
        justify-content: center;
      }
    }
  }
}

// Styles pour les numéros dans les services
.number {
  color: #d54adf;
  font-weight: bold;
  margin-right: 12px;

  @media (max-width: 480px) {
    margin-right: 8px;
    display: block;
    margin-bottom: 5px;
  }
}

.charging-notification {
  display: none;

  p {
    padding: 0;
    margin: 0;
  }

  &.show {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

.debug-panels {
  position: absolute;
  bottom: 0;
  left: 0;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  color: white;
  padding: 10px;
  gap: 10px;
  z-index: 100;
  pointer-events: none;

  @media (max-width: 768px) {
    padding: 5px;
    gap: 5px;
  }
}

.panel {
  border: 1px solid white;
  padding: 10px;
  max-width: 250px;
  width: 250px;

  @media (max-width: 768px) {
    max-width: 200px;
    width: 200px;
    padding: 8px;
  }

  @media (max-width: 480px) {
    max-width: 150px;
    width: 150px;
    padding: 5px;
  }

  p {
    margin: 0;
    padding: 0;
  }

  button {
    border: 0;
    background-color: #f9f9f9;
    color: #444;
    font-size: 1em;
    padding: 6px 10px;
    cursor: pointer;
    pointer-events: all;

    @media (max-width: 480px) {
      font-size: 0.8em;
      padding: 4px 6px;
    }
  }

  > div {
    position: relative !important;
  }
}

#OumaPortfolio-path {
  stroke: red;
  stroke-width: 2;
  fill: none;
}

#OumaPortfolio-points {
  circle {
    fill: white;
  }
}

// #OumaPortfolios {
//   width: 0;
//   height: 0;
//   overflow: hidden;
//   position: absolute;
//   top: 0;
//   left: 0;
// }

.controls {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 12px;

  @media (max-width: 480px) {
    gap: 8px;
  }
}

.state {
  padding-bottom: 0.5em;
}

.OumaPortfolio-stat {
  padding: 0 1rem;
  font-size: 14px;
  border-left: 5px solid transparent;

  @media (max-width: 768px) {
    padding: 0 0.5rem;
    font-size: 12px;
  }

  @media (max-width: 480px) {
    padding: 0 0.3rem;
    font-size: 10px;
  }

  &:not(:last-child) {
    padding-bottom: 1rem;

    @media (max-width: 480px) {
      padding-bottom: 0.5rem;
    }
  }

  .OumaPortfolio-preview {
    stroke: white;
    stroke-width: 2;
    fill: none;
    width: 60px;

    @media (max-width: 768px) {
      width: 45px;
    }

    @media (max-width: 480px) {
      width: 35px;
    }
  }

  .vide {
    font-size: 1.4em;
    width: 120px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline;

    @media (max-width: 768px) {
      font-size: 1.2em;
      width: 100px;
    }

    @media (max-width: 480px) {
      font-size: 1em;
      width: 80px;
    }
  }

  div {
    display: flex;
    align-items: center;
    gap: 2rem;
    flex-direction: row;

    @media (max-width: 768px) {
      gap: 1.5rem;
    }

    @media (max-width: 480px) {
      gap: 1rem;
    }
  }

  &.cast {
    border-left: 5px solid red;
  }
}

.debug-overlays {
  pointer-events: none;
}

//heey
.clear-interface {
  .debug-panels,
  .debug-overlays,
  .audio-controls,
  .top-bar,
  .screens {
    display: none;
  }
}

.debug-layout {
  .top-bar {
    outline: solid 2px #fcc088;
  }

  .screens {
    outline: solid 2px green;

    > * {
      &::after {
        display: grid;
        align-items: center;
        justify-content: center;
        content: "SPACE";
        background-color: #ff000055;
        outline: solid 2px red;
      }
    }
  }
}

.sr-only {
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

// Responsive utilities
// @media (max-width: 1024px) {
//   // Cache complètement la section des portfolios sur tablettes et plus petit
//   .OumaPortfolios {
//     display: none !important;
//     visibility: hidden !important;
//     opacity: 0 !important;
//     pointer-events: none !important;
//   }
// }

.clear-interface {
  .debug-panels,
  .debug-overlays,
  .audio-controls,
  .top-bar,
  .screens {
    display: none;
  }
}

.debug-layout {
  .top-bar {
    outline: solid 2px purple;
  }
  .screens {
    outline: solid 2px green;
    > * {
      &::after {
        display: grid;
        align-items: center;
        justify-content: center;
        content: "SPACE";
        background-color: #ff000055;
        outline: solid 2px red;
      }
    }
  }
  .content {
    background-color: #0000ff55;
    outline: solid 2px blue;
  }
}

@media (orientation: landscape) and (max-height: 500px) {
  // Ajustements pour les appareils en mode paysage avec peu de hauteur
  .screens > * {
    --pad: 2vmin;
  }
  .content,
  .content1 {
    > *:not(:last-child) {
      margin-bottom: clamp(8px, 2vmin, 20px);
    }
  }
}

.OumaPortfolios {
  inset: unset;
  bottom: 3vmin;
  right: 3vmin;
  z-index: 10;
  max-width: 50%;
  display: none;
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 1fr;
  gap: 1.5rem;
  justify-content: center;
  align-items: center;
  padding: 0.5rem 1.5rem;

  // Copie de min-width mais avec p caché et svg plus petit
  @media (max-width: 1025px) {
    max-width: 40%;
    grid-template-columns: 1fr;
    grid-template-rows: repeat(4, auto);
    gap: 0;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    .OumaPortfolio-path {
      width: 70px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      .check {
        display: none;
      }
      svg {
        width: 50%;
        fill: none;
      }
    }
    .info {
      display: none;
      flex-direction: column;
      width: 100% !important;

      h4 {
        margin-bottom: 0.2rem;
      }
      p {
        display: none !important;
      }
    }
    .charge-path {
      stroke-width: 6;
      stroke-dasharray: var(--length) var(--length);
      stroke-dashoffset: calc(((1 - var(--charge))) * var(--length));
    }
    .guide-path {
      stroke: rgba(255, 255, 255, 0.2);
    }
    .OumaPortfolio-details {
      display: flex;
      flex-direction: row;
      gap: 0.8rem;
      align-items: center;
      z-index: 2;
    }
    .background {
      position: absolute;
      inset: 0;
      border: solid 2px var(--color-grey);
      background: 
  // Grille orange subtile
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 50px,
          rgba(51, 17, 0, 0.1) 50px,
          rgba(51, 17, 0, 0.1) 51px
        ),
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 50px,
          rgba(51, 17, 0, 0.1) 50px,
          rgba(51, 17, 0, 0.1) 51px
        ),
        // Dégradé principal
        radial-gradient(
            ellipse 150% 80% at 50% 100%,
            #4d1f00 0%,
            /* Orange au fond */ #261000 40%,
            /* Brun foncé */ #000000 80% /* Noir */
          );
    }
    a {
      font-size: 16px;
    }
    &.corner {
      cursor: pointer;
      pointer-events: all;
      display: grid;
      .OumaPortfolio-path {
        &.ready {
          .check {
            opacity: 1;
            transform: translate(-50%, -200%);
          }
        }
      }
      &:hover {
        .background {
          border-color: var(--color-Avatar);
        }
      }
    }
    &.full {
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 1fr 1fr 1fr;
      bottom: 50%;
      gap: 2rem;
      transform: translateY(50%);
      padding: 2rem 3rem;
      .OumaPortfolio-path {
        width: 160px;
        .check {
          transition: none;
        }
        svg {
          --charge: 1 !important;
        }
      }
      .info {
        display: flex;
      }
    }
  }

  // Styles uniquement pour les grands écrans (desktop)
  @media (min-width: 1025px) {
    .OumaPortfolio-path {
      width: 70px;
      position: relative;
      .check {
        display: none;
      }
      svg {
        width: 60%;
        fill: none;
      }
    }
    .info {
      display: none;
      flex-direction: column;
      h4 {
        margin-bottom: 0.2rem;
      }
      p {
        font-size: 15px;
        line-height: 1.2;
      }
    }
    .charge-path {
      stroke-width: 6;
      stroke-dasharray: var(--length) var(--length);
      stroke-dashoffset: calc(((1 - var(--charge))) * var(--length));
    }
    .guide-path {
      stroke: rgba(255, 255, 255, 0.2);
    }
    .OumaPortfolio-details {
      display: flex;
      flex-direction: row;
      gap: 0.8rem;
      align-items: center;
      z-index: 2;
    }
    .background {
      position: absolute;
      inset: 0;
      border: solid 2px var(--color-grey);
      background-color: var(--color-black-alpha);
    }
    a {
      font-size: 16px;
    }
    &.corner {
      cursor: pointer;
      pointer-events: all;
      display: grid;
      .OumaPortfolio-path {
        &.ready {
          .check {
            opacity: 1;
            transform: translate(-50%, -200%);
          }
        }
      }
      &:hover {
        .background {
          border-color: var(--color-Avatar);
        }
      }
    }
    &.full {
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 1fr 1fr 1fr;
      bottom: 50%;
      gap: 2rem;
      transform: translateY(50%);
      padding: 2rem 3rem;
      .OumaPortfolio-path {
        width: 160px;
        .check {
          transition: none;
        }
        svg {
          --charge: 1 !important;
        }
      }
      .info {
        display: flex;
      }
    }
  }
}

#OumaPortfolios {
  width: 0;
  height: 0;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
}

// Améliorations pour l'accessibilité et l'expérience utilisateur
@media (max-width: 768px) {
  // Ajuste les espacements pour les petits écrans
  .app {
    h1 br {
      display: none; // Supprime les sauts de ligne forcés sur mobile
    }
  }

  // Améliore l'espacement des boutons
  .button-row {
    li {
      width: 100%;

      button {
        width: 100%;
        min-width: 120px;
      }
    }
  }
}

@media (max-width: 480px) {
  // Optimisations pour les très petits écrans
  body {
    -webkit-text-size-adjust: 100%; // Empêche le zoom automatique sur iOS
  }

  // Améliore la lisibilité des textes
  .content1 p {
    text-align: left;
    line-height: 1.6;
  }

  // Optimise les liens
  a {
    min-height: 44px; // Taille minimale pour les éléments tactiles
    display: inline-flex;
    align-items: center;
  }
}

// Styles pour les orientations spécifiques
@media (orientation: landscape) and (max-height: 500px) {
  // Ajustements pour les appareils en mode paysage avec peu de hauteur
  .screens > * {
    --pad: 2vmin;
  }

  .content,
  .content1 {
    > *:not(:last-child) {
      margin-bottom: clamp(8px, 2vmin, 20px);
    }
  }
}

// High DPI / Retina displays
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  // Améliore le rendu sur les écrans haute résolution
  .health-bar,
  .loading-bar {
    border-width: 1px;
  }

  button:not(.simple, .no-style) {
    border-width: 1px;
  }
}
